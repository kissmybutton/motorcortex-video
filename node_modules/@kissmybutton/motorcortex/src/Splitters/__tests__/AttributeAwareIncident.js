const AnimatedAttributeSplitter = require('../AnimatedAttributeSplitter');
const DescriptiveIncident = require('../../DescriptiveIncidents/DescriptiveIncident');

const di = new DescriptiveIncident({
    animatedAttrs: {
        alpha: 1.1,
        beta: 2.2
    }
}, {
    selector: 'my-test-selector'
});

const contextData = {
    clipId: 'my-test-clip-id',
    context: {}
};

const aai = new AnimatedAttributeSplitter(di, contextData, 'specific-mcid', 'specific-mcid-targeting-selector');

test(`AnimatedAttributeSplitter should set up one ContextAwareIncident on 0 position per attribute
        on construction time`, () => {
    expect(Object.keys(aai.children).length).toEqual(2);
    expect(Object.keys(aai.children)).toContain(`${di.id}_specific-mcid_alpha`);
    expect(Object.keys(aai.children)).toContain(`${di.id}_specific-mcid_beta`);
    expect(aai.children[`${di.id}_specific-mcid_alpha`].position).toEqual(0);
    expect(aai.children[`${di.id}_specific-mcid_beta`].position).toEqual(0);
    expect(aai.children[`${di.id}_specific-mcid_alpha`].id).toEqual(`${di.id}_specific-mcid_alpha`);
    expect(aai.children[`${di.id}_specific-mcid_beta`].id).toEqual(`${di.id}_specific-mcid_beta`);
    expect(aai.children[`${di.id}_specific-mcid_alpha`].leaf.id).toEqual(`${di.id}_specific-mcid_alpha`);
    expect(aai.children[`${di.id}_specific-mcid_beta`].leaf.id).toEqual(`${di.id}_specific-mcid_beta`);
});
